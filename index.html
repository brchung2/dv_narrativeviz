<!DOCTYPE html>
<html>

<script src="https://d3js.org/d3.v5.min.js"></script>

    <style type="text/css">
    /* 13. Basic Styling with CSS */

    /* Style the lines by removing the fill and applying a stroke */
    .line { 
        fill: none;
        stroke: #ffab00;
        stroke-width: 3;
    }

    .overlay {
      fill: none;
      pointer-events: all;
    }

    .dot {
        fill: #ffab00;
        stroke: #fff;
    }

      .focus circle {
      fill: none;
      stroke: steelblue;
    }

</style>   
    
<body onload='init()'> 
    

<script>

async function init() {

// 2. Use the margin convention practice 
var margin = {top: 50, right: 50, bottom: 50, left: 50}
  , width = 740 - margin.left - margin.right
  , height = 450 - margin.top - margin.bottom;

// Add svg
var svg = d3.select("body")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform",
    "translate(" + margin.left + "," + margin.top + ")");
	
    
const data = await d3.csv('emission.csv');
    console.log(data);
//     d3.select('body')
//       .selectAll('p')
//       .data(data)
//       .enter()
//       .append('p')
//       .html(function(d,i) {return 'year ' + d.year+ ' = ' + d.emission ;});

// Add chart title
svg.append("text")
.attr("x", (width / 2))             
.attr("y", 0 - (margin.top / 2))
.attr("text-anchor", "middle")  
.style("font-size", "16px")  
.text("Global CO2 Emissions units");

// Add X axis
var x = d3.scaleLinear()
.domain([1960, 2017])
.range([ 0, width ]);

svg.append("g")
.attr("transform", "translate(0," + height + ")")
.call(d3.axisBottom(x).tickFormat(d3.format("d")));

// text label for the x axis
svg.append("text")             
.attr("transform",
"translate(" + (width/2) + " ," + 
	    (height + margin.top + 15) + ")")
.style("text-anchor", "middle")
.text("Year");
	
 // Add Y axis for Emissions
var y = d3.scaleLinear()
.domain([0, 35])
.range([ height, 0]);

svg.append("g")
.call(d3.axisLeft(y).tickFormat(function(d) { return formatValue(d).replace('M', 'million'); }));

// Text label for the Emissions y axis
svg.append("text")
.attr("transform", "rotate(-90)")
.attr("y", 0 - margin.left)
.attr("x",0 - (height / 2))
.attr("dy", "1em")
.style("text-anchor", "middle")
.text("CO2 Emissions - kiloton (kt)"); 

    
}
</script>
</body>
</html>
 
